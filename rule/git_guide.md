# Git 使用规范

为保证多人协作下的代码一致性、可维护性和自动化部署流程的顺畅，制定以下 Git 使用规范。

- [分支命名规范](#分支命名规范)
- [标签命名规范](#标签命名规范)

---

### 分支命名规范

#### 主分支（长期存在）

| 分支   | 说明                                             |
| ------ | ------------------------------------------------ |
| `main` | 生产环境主干，始终保持稳定，仅合并经过测试的功能 |

#### 功能性分支（短期存在）

| 类型     | 格式               | 用途                                   |
| -------- | ------------------ | -------------------------------------- |
| 功能开发 | `feature/{功能名}` | 开发新功能                             |
| Bug 修复 | `fix/{问题名}`     | 修复已知问题                           |
| 重构     | `refactor/{模块}`  | 结构优化或技术重构                     |
| 测试     | `test/{模块}`      | 编写或更新测试                         |
| 文档     | `docs/{说明}`      | 更新文档内容                           |
| 静态资源 | `resource/{资源}`  | 处理静态资源（如图片、字体等）         |
| 热修复   | `hotfix/{描述}`    | 紧急修复线上问题（直接从 main 分支切） |

> 分支命名务必使用 **小写 + 连字符** ，避免使用中文或空格

#### 示例：

```bash
feat/login: 添加用户登录接口

fix/api: 修复 token 失效时无法重新获取的问题

refactor/auth: 重构权限校验流程

docs/readme: 补充安装步骤说明
```

---

### 标签命名规范

#### 结构解析

| 部分             | 说明                                            |
| ---------------- | ----------------------------------------------- |
| `v`              | 固定前缀，代表版本                              |
| `主版本号`       | 有破坏性变更时递增                              |
| `次版本号`       | 添加向后兼容的新特性时递增                      |
| `修订号`         | 修复 bug 时递增                                 |
| `预发布标签`     | `-beta.1`、`-rc.0`、`-alpha.2` 等，用于测试版本 |
| `元数据`（可选） | `+build.001`，用于构建信息追踪                  |

---

## 🎯 示例版本

| Tag                 | 说明                           |
| ------------------- | ------------------------------ |
| `v1.0.0`            | 第一版正式发布                 |
| `v1.2.3`            | 新增功能 + bug 修复            |
| `v2.0.0`            | 含破坏性更新（需说明迁移说明） |
| `v1.4.0-beta.2`     | 测试版发布，用于灰度           |
| `v1.4.1+build.5678` | 加入构建号追踪，用于 CI        |

---

### 代码提交规范

1. 创建并切换至开发分支（避免重名，会被忽略）

```bash
git checkout -b feat/分支名
```

2. 按分类提交代码（可以使用编译器进行提交，更方便一些）

```bash
git add .
git commit -m "备注信息"
```

3. 切换到主分支拉取最新代码

```bash
git checkout main
git pull origin main
```

4. 回到开发分支

```bash
git checkout feat/分支名
```

5. rebase 操作

```bash
git rebase main
```

6. 无冲突情况直接推送分支即可

```bash
git push origin feat/分支名
```

7. 有冲突情况需要手动解决冲突，解决后代码添加到暂存区，不要提交（commit），然后执行

```bash
git rebase --continue
```

8. 推送合并后的代码

```bash
git push origin feat/分支名
```
